import{_ as e,o,c as a,V as s}from"./chunks/framework.fa42150b.js";const m=JSON.parse('{"title":"ROS Notes","description":"","frontmatter":{},"headers":[],"relativePath":"notes/misc/ros-notes.md"}'),l={name:"notes/misc/ros-notes.md"},r=s(`<h1 id="ros-notes" tabindex="-1">ROS Notes <a class="header-anchor" href="#ros-notes" aria-label="Permalink to &quot;ROS Notes&quot;">​</a></h1><h2 id="communication" tabindex="-1">Communication <a class="header-anchor" href="#communication" aria-label="Permalink to &quot;Communication&quot;">​</a></h2><ul><li>Node <blockquote><p>ROS 裡最小的單位</p></blockquote></li><li>Topic ( Publisher / Subscriber ) <blockquote><p>只能做單方面的發布、接收</p></blockquote></li><li>Service ( Server / Client ) <blockquote><p>雙向，會暫停直到收到對方回應</p></blockquote></li><li>Action ( Server / Client ) <blockquote><p>雙向，中間可接收 feedback</p></blockquote></li><li>Parameter Server <blockquote></blockquote></li></ul><p><img src="https://i.imgur.com/eHX8VBn.png" alt=""></p><h3 id="topic-talker-and-listener" tabindex="-1">Topic ( Talker and Listener ) <a class="header-anchor" href="#topic-talker-and-listener" aria-label="Permalink to &quot;Topic ( Talker and Listener )&quot;">​</a></h3><ul><li><code>roscore</code>：開啟 master <blockquote><p>如果沒有開啟的話，node 彼此無法溝通。<br> roscore 在一個網域中只能同時有一個！</p></blockquote></li></ul><p><img src="https://i.imgur.com/gXDo79C.png" alt=""></p><ul><li><code>rosrun roscpp_tutorials talker</code>：執行 talker node</li><li><code>rosrun roscpp_tutorials listener</code>：執行 listener node <blockquote><p>talker 和 listener 是 package：roscpp_tutorials 內建的</p></blockquote></li><li><code>rosnode list</code>：列出目前所有 node</li><li><code>rosnode info &lt;node_name&gt;</code>：列出 node 的詳細資訊</li><li><code>rostopic list</code>：列出目前所有的 topic</li><li><code>rostopic hz /&lt;node_name&gt;</code>：列出 topic 發送的頻率</li><li><code>rostopic info &lt;topic_name&gt;</code>：列出 topic 的詳細資訊</li><li><code>rosmsg show std_mags/&lt;msg_name&gt;</code>：列出 msg 的型別和變數名稱</li><li><code>rosnode ping /&lt;node&gt;</code>：測試 node 是否存在 <blockquote><p>若不存在、關閉此 node，則會出現 <code>cannot ping [/&lt;node&gt;]: unknown node</code></p></blockquote></li></ul><h3 id="service" tabindex="-1">Service <a class="header-anchor" href="#service" aria-label="Permalink to &quot;Service&quot;">​</a></h3><h4 id="request-response-communication" tabindex="-1">Request &amp; Response Communication <a class="header-anchor" href="#request-response-communication" aria-label="Permalink to &quot;Request &amp; Response Communication&quot;">​</a></h4><p><img src="https://i.imgur.com/25HuvPP.png" alt=""></p><ul><li><code>rosservice list</code>：列出目前可用的 service</li><li><code>rosservice type /&lt;service_name&gt;</code>：列出 service 的型別</li><li><code>rosservice call /&lt;service_name&gt; &lt;args&gt;</code>：呼叫 service <blockquote><p>args 為根據定義所需要的參數</p></blockquote></li></ul><h4 id="service-definition" tabindex="-1">Service Definition <a class="header-anchor" href="#service-definition" aria-label="Permalink to &quot;Service Definition&quot;">​</a></h4><p>副檔名：<code>.srv</code></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;request&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">---</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;response&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>範例：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">geometry_msgs/PoseStamped start</span></span>
<span class="line"><span style="color:#A6ACCD;">geometry_msgs/PoseStamped goal</span></span>
<span class="line"><span style="color:#A6ACCD;">float32 tolerance</span></span>
<span class="line"><span style="color:#A6ACCD;">---</span></span>
<span class="line"><span style="color:#A6ACCD;">nav_msgs/Path plan</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h4><ol><li><code>roscore</code>：開啟 master</li><li><code>rosrun roscpp_tutorials add_two_ints_server</code>：執行此 server</li><li><code>rosservice list</code>：列出目前可用的 service</li><li><code>rosservice type /add_two_ints</code>：列出 service 的型別</li><li><code>rossrv show roscpp_tutorials/TwoInts</code>：查看 Service Definition</li><li><code>rosservice call /add_two_ints &quot;a: 10 b: 5&quot;</code>：呼叫 service</li></ol><blockquote><p>不知道參數型態，可在最後按「tab」獲得提示 執行 <code>rosrun roscpp_tutorials add_two_ints_server</code> 的 Terminal 也會獲得資訊</p></blockquote><h3 id="action" tabindex="-1">Action <a class="header-anchor" href="#action" aria-label="Permalink to &quot;Action&quot;">​</a></h3><ol><li>Request &amp; Response with</li></ol><ul><li>Cancel the task ( preempt )</li><li>Receive feedback on the progress</li></ul><ol start="2"><li>Suitable to the scenario while <strong>response time is too long</strong></li><li>Implemented with several topics</li></ol><p><img src="https://i.imgur.com/9XOTKK1.png" alt=""></p><h4 id="action-definition" tabindex="-1">Action Definition <a class="header-anchor" href="#action-definition" aria-label="Permalink to &quot;Action Definition&quot;">​</a></h4><p>副檔名：<code>.action</code></p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;goal&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">---</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;result&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">---</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;feedback&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>範例：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">navigation_msgs/Path path</span></span>
<span class="line"><span style="color:#A6ACCD;">---</span></span>
<span class="line"><span style="color:#A6ACCD;">bool success</span></span>
<span class="line"><span style="color:#A6ACCD;">---</span></span>
<span class="line"><span style="color:#A6ACCD;">float32 remaining_distance</span></span>
<span class="line"><span style="color:#A6ACCD;">float32 initial_distance</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="example-1" tabindex="-1">Example <a class="header-anchor" href="#example-1" aria-label="Permalink to &quot;Example&quot;">​</a></h4><ol><li><code>roscore</code></li><li><code>rosrun actionlib_tutorials fibonacci_server</code></li><li><code>rosrun actionlib_tutorials fibonacci_client</code></li><li><code>rostopic list</code>：列出目前的 topic</li><li><code>rostopic echo /fibonacci/status</code>：列出 status</li><li><code>rostopic echo /fibonacci/feedback</code>：列出 feedback</li></ol><h3 id="parameters" tabindex="-1">Parameters <a class="header-anchor" href="#parameters" aria-label="Permalink to &quot;Parameters&quot;">​</a></h3><ol><li>ROS provides Parameter Server for nodes</li><li>ROS node can store/retrieve parameter from server at runtime</li><li>rosparam is the CLI tools for Parameter Server</li></ol><ul><li><code>rosparam list</code>：列出 parameters</li><li><code>rosparam set &lt;parameter&gt; &lt;value&gt;</code>：設定變數</li><li><code>rosparam get /&lt;parameter&gt;</code>：列出變數的內容</li><li><code>rosparam dump</code>：列出所有 parameters 的內容</li></ul><h3 id="comparison" tabindex="-1">Comparison <a class="header-anchor" href="#comparison" aria-label="Permalink to &quot;Comparison&quot;">​</a></h3><p>Topic 單方向、連續將資料傳送給對方 Service 停下來等待回應 <img src="https://i.imgur.com/VAH8H19.png" alt=""></p><h2 id="launch" tabindex="-1">Launch <a class="header-anchor" href="#launch" aria-label="Permalink to &quot;Launch&quot;">​</a></h2><ol><li>Able to launch multiple ROS nodes and set parameters easily</li><li>It’ll start roscore if no roscore</li><li>副檔名：<code>.launch</code></li></ol><p>範例：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">&lt;launch&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;node name=&quot;listener&quot; pkg=&quot;roscpp_tutorials&quot; type=&quot;listener&quot; output=&quot;screen&quot;/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    &lt;node name=&quot;talker&quot; pkg=&quot;roscpp_tutorials&quot; type=&quot;talker&quot; output=&quot;screen&quot;/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;/launch&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><code>roslaunch roscpp_tutorials talker_listener.launch</code>： 執行此 launch 檔案 ( 會自動 <code>roscore</code> ) <blockquote><p>指令內容結構：<code>roslaunch &lt;package&gt; &lt;file.launch&gt;</code></p></blockquote></li></ul><h2 id="useful-ros-tool" tabindex="-1">Useful ROS Tool <a class="header-anchor" href="#useful-ros-tool" aria-label="Permalink to &quot;Useful ROS Tool&quot;">​</a></h2><h3 id="rostopic" tabindex="-1">rostopic <a class="header-anchor" href="#rostopic" aria-label="Permalink to &quot;rostopic&quot;">​</a></h3><ol><li><strong>Latching mode</strong><blockquote><p>Rostopic will publish a message to <code>/topic_name</code> and keep it latched -- any new subscribers that come online after you start rostopic will hear this message. You can stop this at any time by pressing <code>ctrl-C</code>.<br> Rostopic 將向 <code>/topic_name</code> 發布訊息並保持鎖定 —— 任何啟動 rostopic 後上線的新 subscribers 都會聽到收到這則訊息。<br><code>rostopic pub -l /chatter std_msgs/String &quot;data: &#39;test&#39;&quot;</code></p></blockquote></li><li><strong>Once mode</strong><blockquote><p>If you don&#39;t want to have to stop rostopic with <code>ctrl-C</code>, you can publish in once mode.<br> rostopic will keep the message latched.<br> 如果不想用中斷 rostopic，可選擇 Once mode 下發布。<br> rostopic 將鎖定訊息 3 秒後退出。<br><code>rostopic pub -1 /chatter std_msgs/String &quot;data: &#39;test&#39;&quot;</code></p></blockquote></li><li><strong>Rate mode</strong><blockquote><p>In rate mode, rostopic will publish your message at a specific rate. For example, -r 10 will publish at 10hz. For file and piped input, this defaults to 10hz.<br> 在 Rate mode 下，rostopic 將以特定速率發布訊息。<br><code>rostopic pub -r 10 /chatter std_msgs/String &quot;data: &#39;test&#39;&quot;</code></p></blockquote></li></ol><h3 id="rosbag" tabindex="-1">rosbag <a class="header-anchor" href="#rosbag" aria-label="Permalink to &quot;rosbag&quot;">​</a></h3><ol><li>Record, Replay and Debug 錄製、重播、偵錯</li><li>network =&gt; wireshark</li><li>ROS =&gt; rosbag</li></ol><ul><li><code>rosbag record --all</code>：record 全部的 topic</li><li><code>rosbag record /&lt;topic&gt;</code>：rocord 特定的 topic</li><li><code>rosbag info &lt;rosbag_filename&gt;.bag</code>：列出 file.bag 的資訊</li><li><code>rosbag play &lt;rosbag_filename&gt;.bag</code>：播放 file.bag 的錄製內容</li></ul><h3 id="rqt" tabindex="-1">rqt <a class="header-anchor" href="#rqt" aria-label="Permalink to &quot;rqt&quot;">​</a></h3><p>圖形化介面工具</p><ul><li><code>rqt</code>：開啟 rqt</li><li><code>rqt_graph</code>：開啟 rqt 並打開 node graph <blockquote><p>藍色為 Publisher、綠色為 Subscriber、紅色則為 Topic</p></blockquote></li></ul><h2 id="build-ros-packages" tabindex="-1">Build ROS packages <a class="header-anchor" href="#build-ros-packages" aria-label="Permalink to &quot;Build ROS packages&quot;">​</a></h2><p><img src="https://i.imgur.com/LHV0oLm.png" alt=""></p><ul><li><p><strong>Workspace</strong></p><ul><li><strong>src</strong>：放程式碼</li><li><strong>build</strong> ( 由 catkin_make 自動創建 )</li><li><strong>devel</strong> ( 由 catkin_make 自動創建 )</li></ul></li><li><p><code>mkdir -p ~/&lt;workspace_name&gt;/src</code>：創建 workspace</p></li><li><p><code>cd ~/&lt;workspace_name&gt;/src</code>：移動到 workspace/src</p></li><li><p><code>git clone https://github.com/ros/ros_tutorials.git</code></p></li><li><p><code>cd ~/&lt;workspace_name&gt;</code>：移動到 workspace</p></li><li><p><code>catkin_make</code>：建立 packages</p></li></ul><h3 id="overlay" tabindex="-1">Overlay <a class="header-anchor" href="#overlay" aria-label="Permalink to &quot;Overlay&quot;">​</a></h3><ul><li><code>cd ~/&lt;workspace_name&gt;</code>：移動到 workspace</li><li><code>rospack list | grep rospy_tutorials</code>：列出 rospy_tutorials 的 package</li><li><code>echo $ROS_PACKAGE_PATH</code>：顯示 ROS system&#39;s packages 路徑</li></ul><p>Setup the package environment by overlay</p><blockquote><p><code>source devel/setup.bash</code> 覆蓋</p></blockquote><ul><li><code>rospack list | grep rospy_tutorials</code></li><li><code>echo $ROS_PACKAGE_PATH</code></li></ul><h3 id="environment-variable-環境變數" tabindex="-1">Environment Variable 環境變數 <a class="header-anchor" href="#environment-variable-環境變數" aria-label="Permalink to &quot;Environment Variable 環境變數&quot;">​</a></h3><ul><li><code>ROS_DISTRO</code>：ROS distribution, e.g. noetic</li><li><code>ROS_MASTER_URI</code>：Tell ROS node where to locate master</li><li><code>ROS_IP/ROS_HOSTNAME</code>：Network Address of ROS node</li><li><code>ROS_ROOT</code>：Where the ROS root path is</li><li><code>ROS_PACKAGE_PATH</code>：Tell ROS system where to search the packages</li></ul><h4 id="指令" tabindex="-1">指令 <a class="header-anchor" href="#指令" aria-label="Permalink to &quot;指令&quot;">​</a></h4><ul><li><code>echo $&lt;environment_variable&gt;</code>：可以顯示出來看</li><li><code>ros_menu_env</code>：可以顯示常見環境變數 ( 僅限有使用 ros menu )</li></ul><h3 id="reference-for-ros" tabindex="-1">Reference for ROS <a class="header-anchor" href="#reference-for-ros" aria-label="Permalink to &quot;Reference for ROS&quot;">​</a></h3><ul><li><a href="https://www.ros.org/" target="_blank" rel="noreferrer">ROS Official Sites</a>：ROS 官方網站</li><li><a href="https://discourse.ros.org/" target="_blank" rel="noreferrer">ROS Discourse</a>：很多公司、研究單位會發布 ROS 相關知識</li><li><a href="http://wiki.ros.org/" target="_blank" rel="noreferrer">ROS Wiki</a>：安裝、教學、如何使用 API</li><li><a href="https://answers.ros.org/questions/" target="_blank" rel="noreferrer">ROS Answers</a>：跟 ROS 有關的問題</li><li><a href="https://index.ros.org/packages/" target="_blank" rel="noreferrer">ROS Packages List</a></li><li><a href="https://github.com/ros" target="_blank" rel="noreferrer">ROS GitHub</a></li><li><a href="https://github.com/ros2" target="_blank" rel="noreferrer">ROS 2 GitHub</a></li><li><a href="https://www.openrobotics.org/" target="_blank" rel="noreferrer">Open Robotics</a></li><li><a href="https://github.com/ROBOTIS-GIT/ros_seminar" target="_blank" rel="noreferrer">ROS tutorial</a>：一些 ROS 的教學教材</li><li><a href="https://www.youtube.com/playlist?list=PLRE44FoOoKf7NzWwxt3W2taZ7BiWyfhCp" target="_blank" rel="noreferrer">ROS 2 tutorials for foxy</a>：ROS2 的影片</li><li><a href="https://github.com/adlink-ROS/" target="_blank" rel="noreferrer">ADLINK GitHub</a></li></ul>`,65),t=[r];function i(n,c,p,d,u,h){return o(),a("div",null,t)}const g=e(l,[["render",i]]);export{m as __pageData,g as default};
